let pokemonRepository=function(){let e=[],t=0,o="https://pokeapi.co/api/v2/generation",n="https://pokeapi.co/api/v2/type",a=!1,l=null,i=null,r={bug:"#a8b820",dragon:"#7038f8",grass:"#9bcc50",steel:"#b8b8d0",dark:"#707070",flying:"#a890f0",normal:"#a4acaf",ghost:"#705898",rock:"#b8a038",ground:"#e0c068",fighting:"#c02038",fire:"#f08030",electric:"#f8d030",poison:"#a040a0",psychic:"#f366b9",fairy:"#fdb9e9",water:"#6890f0",ice:"#98d8d8"};function d(t){e.push(t)}function s(){return e}function c(e){var t;let o=document.querySelector("#pokemon-main-card"),n=document.createElement("div");n.classList.add("card","cardListElem","rounded-3","g-col-12","g-col-sm-6","g-col-md-4","g-col-xl-3","p-2","m-1","m-sm-2","flex-fill"),o.appendChild(n);let a=document.createElement("img");a.src=e.imageUrl,a.classList.add("img-fluid","pokemon-card-body"),n.appendChild(a);let l=document.createElement("div");l.classList.add("card-body"),n.appendChild(l);let i=document.createElement("h5");i.innerText=e.name,i.classList.add("mb-0","text-capitalize"),i.setAttribute("title",e.name),l.appendChild(i);let d=document.createElement("h6");d.classList.add("mb-3","text-muted"),d.innerText="#"+(t=e.id).toString().padStart(3,"0"),l.appendChild(d);let s=document.createElement("div");s.classList.add("grid","gap-2"),l.appendChild(s),e.types.forEach(e=>{let t=document.createElement("p");t.classList.add("g-col-6","text-center","p-2","rounded-3","m-0","text-capitalize");let o=e.type.name;t.innerText=o,t.style.backgroundColor=r[o],s.appendChild(t)})}function p(){if(a)return;a=!0,function e(){let t=document.createElement("div");t.id="loading-spinner",t.classList.add("d-flex","justify-content-center","m-5");let o=document.createElement("div");o.classList.add("spinner-border","text-primary"),o.setAttribute("role","status"),t.appendChild(o);let n=document.querySelector("#pokemon-main-card");n.insertAdjacentElement("afterend",t)}();let n;if(l){n=`${o}/${l}`;let r=document.querySelector("#pokemon-main-card");r.innerHTML=""}else if(i){n=i;let s=document.querySelector("#pokemon-main-card");s.innerHTML=""}else n=`https://pokeapi.co/api/v2/pokemon?offset=${t}&limit=20`,y();fetch(n).then(e=>e.json()).then(async o=>{if(l){let n=o.pokemon_species,a=n.map(async e=>{let t={name:e.name,detailsUrl:e.url.replace("-species","")};await m(t),d(t)});await Promise.all(a)}else if(i){let r=o.pokemon,s=r.map(async e=>{let t={name:e.pokemon.name,detailsUrl:e.pokemon.url};await m(t),d(t)});await Promise.all(s)}else{let p=o.results.map(async e=>{let t={name:e.name,detailsUrl:e.url};await m(t),d(t)});await Promise.all(p),t+=20}e.sort((e,t)=>e.id-t.id),function t(){let o=document.querySelector("#pokemon-main-card");o.innerHTML="",e.forEach(e=>c(e))}()}).catch(e=>{console.error("Error loading Pok\xe9mon:",e)}).finally(()=>{(function e(){let t=document.querySelector("#loading-spinner");t&&t.remove()})(),a=!1})}async function m(e){let t=e.detailsUrl;try{let o=await fetch(t),n=await o.json();e.id=n.id,e.height=n.height,e.types=n.types,n.sprites.other.dream_world.front_default?e.imageUrl=n.sprites.other.dream_world.front_default:n.sprites.other["official-artwork"].front_default?e.imageUrl=n.sprites.other["official-artwork"].front_default:n.sprites.front_default?e.imageUrl=n.sprites.front_default:e.imageUrl="img/NoPokemon.svg"}catch(a){console.error(a)}}async function f(e){try{let t=await fetch(e),o=await t.json();return o.results}catch(n){console.error(n)}}function u(e,t){let o=document.querySelector(t);o.innerHTML="",e.forEach(e=>{let t=document.createElement("li");t.classList.add("dropdownOption");let n=document.createElement("a");n.classList.add("dropdown-item","text-capitalize"),n.href="#",n.innerText=e.name,t.appendChild(n),o.appendChild(t)})}async function k(){let t=await f(o);u(t,"#generationDropdown");let n=document.querySelectorAll("#generationDropdown .dropdown-item");n.forEach((t,o)=>{t.addEventListener("click",()=>{var t;return t=o+1,void(h(),l=t,i=null,e=[],p())})})}async function v(){let t=await f(n);(t=(t=t.filter(e=>"unknown"!==e.name)).filter(e=>"stellar"!==e.name)).sort((e,t)=>e.name.localeCompare(t.name)),u(t,"#typeDropdown");let o=document.querySelectorAll("#typeDropdown .dropdown-item");o.forEach(t=>{t.addEventListener("click",()=>{var o;o=n+"/"+t.innerText.toLowerCase(),h(),i=o,l=null,e=[],p()})})}function y(){window.addEventListener("scroll",w)}function h(){window.removeEventListener("scroll",w)}function w(){window.innerHeight+window.scrollY>=document.body.offsetHeight-100&&pokemonRepository.loadList()}return{loadList:p,loadPokemonDetails:m,createCard:c,loadGenerationDropdown:k,loadTypeDropdown:v,resetFilter:function o(){l=null,i=null,t=0,e=[],p(),y()}}}();pokemonRepository.loadList(),pokemonRepository.loadGenerationDropdown(),pokemonRepository.loadTypeDropdown();const allPokemonButtons=document.querySelectorAll("#allPokemons, #pokemonLogo");allPokemonButtons.forEach(e=>{e.addEventListener("click",pokemonRepository.resetFilter)}),$(document).ready(function(){$(document).on("click",".dropdown-menu .dropdown-item",function(){$(".nav-link.active").removeClass("active"),$(".dropdown-menu .dropdown-item.active").removeClass("active"),$(this).closest(".dropdown").find(".nav-link").addClass("active"),$(this).addClass("active")}),$(document).on("click","#allPokemons",function(){$(".nav-link.active").removeClass("active"),$(".dropdown-menu .dropdown-item.active").removeClass("active"),$(this).addClass("active")}),$(document).on("click","#pokemonLogo",function(){$(".nav-link.active").removeClass("active"),$(".dropdown-menu .dropdown-item.active").removeClass("active"),$("#allPokemons").addClass("active")})});const backToTopBtn=document.getElementById("backToTopBtn");window.addEventListener("scroll",()=>{window.scrollY>300?backToTopBtn.classList.remove("d-none"):backToTopBtn.classList.add("d-none")}),backToTopBtn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});